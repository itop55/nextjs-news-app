{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport jwtDecode from \"jwt-decode\";\nexport var AuthToken = /*#__PURE__*/function () {\n  function AuthToken(token) {\n    _classCallCheck(this, AuthToken);\n\n    this.token = token;\n\n    _defineProperty(this, \"decodedToken\", void 0);\n\n    this.decodedToken = {\n      email: \"\",\n      exp: 0,\n      name: '',\n      avatarUrl: '',\n      role: '',\n      country: '',\n      city: '',\n      address: ''\n    };\n\n    try {\n      if (token) this.decodedToken = jwtDecode(token);\n    } catch (e) {}\n  }\n\n  _createClass(AuthToken, [{\n    key: \"userData\",\n    get: function get() {\n      return {\n        email: this.decodedToken.email,\n        name: this.decodedToken.name,\n        avatarUrl: this.decodedToken.avatarUrl,\n        role: this.decodedToken.role,\n        country: this.decodedToken.country,\n        city: this.decodedToken.city,\n        address: this.decodedToken.address\n      };\n    }\n  }, {\n    key: \"expiresAt\",\n    get: function get() {\n      return new Date(this.decodedToken.exp * 1000);\n    }\n  }, {\n    key: \"isExpired\",\n    get: function get() {\n      return new Date() > this.expiresAt;\n    }\n  }, {\n    key: \"isAuthenticated\",\n    get: function get() {\n      return !this.isExpired;\n    }\n  }, {\n    key: \"authorizationString\",\n    get: function get() {\n      return \"Bearer \".concat(this.token);\n    }\n  }]);\n\n  return AuthToken;\n}();","map":{"version":3,"sources":["C:/Users/CHOROK/projects/news-app/services/auth_token.ts"],"names":["jwtDecode","AuthToken","token","decodedToken","email","exp","name","avatarUrl","role","country","city","address","e","Date","expiresAt","isExpired"],"mappings":";;;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AAaA,WAAaC,SAAb;AAGE,qBAAqBC,KAArB,EAAqC;AAAA;;AAAA,SAAhBA,KAAgB,GAAhBA,KAAgB;;AAAA;;AACnC,SAAKC,YAAL,GAAoB;AAAEC,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,GAAG,EAAE,CAAlB;AAAqBC,MAAAA,IAAI,EAAE,EAA3B;AAA+BC,MAAAA,SAAS,EAAE,EAA1C;AAA8CC,MAAAA,IAAI,EAAE,EAApD;AAAwDC,MAAAA,OAAO,EAAE,EAAjE;AAAqEC,MAAAA,IAAI,EAAE,EAA3E;AAA+EC,MAAAA,OAAO,EAAE;AAAxF,KAApB;;AACA,QAAI;AACF,UAAIT,KAAJ,EAAW,KAAKC,YAAL,GAAoBH,SAAS,CAACE,KAAD,CAA7B;AACZ,KAFD,CAEE,OAAOU,CAAP,EAAU,CAAE;AACf;;AARH;AAAA;AAAA,wBAUsB;AAClB,aAAO;AACLR,QAAAA,KAAK,EAAE,KAAKD,YAAL,CAAkBC,KADpB;AAELE,QAAAA,IAAI,EAAE,KAAKH,YAAL,CAAkBG,IAFnB;AAGLC,QAAAA,SAAS,EAAE,KAAKJ,YAAL,CAAkBI,SAHxB;AAILC,QAAAA,IAAI,EAAE,KAAKL,YAAL,CAAkBK,IAJnB;AAKLC,QAAAA,OAAO,EAAE,KAAKN,YAAL,CAAkBM,OALtB;AAMLC,QAAAA,IAAI,EAAE,KAAKP,YAAL,CAAkBO,IANnB;AAOLC,QAAAA,OAAO,EAAE,KAAKR,YAAL,CAAkBQ;AAPtB,OAAP;AASD;AApBH;AAAA;AAAA,wBAqBwB;AACpB,aAAO,IAAIE,IAAJ,CAAS,KAAKV,YAAL,CAAkBE,GAAlB,GAAwB,IAAjC,CAAP;AACD;AAvBH;AAAA;AAAA,wBAyB2B;AACvB,aAAO,IAAIQ,IAAJ,KAAa,KAAKC,SAAzB;AACD;AA3BH;AAAA;AAAA,wBA6BiC;AAC7B,aAAO,CAAC,KAAKC,SAAb;AACD;AA/BH;AAAA;AAAA,wBAiC4B;AACxB,8BAAiB,KAAKb,KAAtB;AACD;AAnCH;;AAAA;AAAA","sourcesContent":["import jwtDecode from \"jwt-decode\";\n\nexport type DecodedToken = {\n  readonly email: string;\n  readonly exp: number;\n  readonly name: string;\n  readonly avatarUrl: string;\n  readonly role: string;\n  readonly country: string;\n  readonly city: string;\n  readonly address: string;\n}\n\nexport class AuthToken {\n  readonly decodedToken: DecodedToken;\n\n  constructor(readonly token?: string) {\n    this.decodedToken = { email: \"\", exp: 0, name: '', avatarUrl: '', role: '', country: '', city: '', address: ''};\n    try {\n      if (token) this.decodedToken = jwtDecode(token);\n    } catch (e) {}\n  }\n\n  get userData(): any {\n    return {\n      email: this.decodedToken.email,\n      name: this.decodedToken.name,\n      avatarUrl: this.decodedToken.avatarUrl,\n      role: this.decodedToken.role,\n      country: this.decodedToken.country,\n      city: this.decodedToken.city,\n      address: this.decodedToken.address,\n    }\n  }\n  get expiresAt(): Date {\n    return new Date(this.decodedToken.exp * 1000);\n  }\n\n  get isExpired(): boolean {\n    return new Date() > this.expiresAt;\n  }\n\n  get isAuthenticated(): boolean {\n    return !this.isExpired;\n  }\n\n  get authorizationString() {\n    return `Bearer ${this.token}`;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}