{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CHOROK\\\\projects\\\\news-app\\\\pages\\\\profile.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { privateRoute } from \"../components/private_route\";\nimport Cookie from \"js-cookie\";\nimport Router from \"next/router\";\nimport { COOKIES } from \"../services/login_service\";\nimport { get } from \"../services/rest_service\";\nimport Layout from \"../components/layout\";\n\nfunction Page(props) {\n  const logout = async () => {\n    Cookie.remove(COOKIES.authToken);\n    await Router.push(\"/login\");\n  };\n\n  const {\n    email,\n    name,\n    avatarUrl,\n    role\n  } = props.auth.userData;\n  return __jsx(Layout, {\n    title: \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 9\n    }\n  }, props.message), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }\n  }, props.auth.authorizationString), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }, \"isAuthenticated:\", props.auth.isAuthenticated ? \"YES\" : \"NO\"), __jsx(\"button\", {\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }\n  }, \"Logout\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 9\n    }\n  }, email), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }\n  }, name), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }, avatarUrl), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, role));\n}\n\nPage.getInitialProps = async ({\n  auth\n}) => {\n  const res = await get(\"/api/restricted\", {\n    headers: {\n      Authorization: auth.authorizationString\n    }\n  });\n  let message = \"Something unexpected happened!\";\n\n  if (res.error) {\n    message = res.error;\n  } else if (res.data && res.data.message) {\n    message = res.data.message;\n  }\n\n  return {\n    message,\n    auth\n  };\n};\n\nexport default privateRoute(Page);","map":{"version":3,"sources":["C:/Users/CHOROK/projects/news-app/pages/profile.tsx"],"names":["privateRoute","Cookie","Router","COOKIES","get","Layout","Page","props","logout","remove","authToken","push","email","name","avatarUrl","role","auth","userData","message","authorizationString","isAuthenticated","getInitialProps","res","headers","Authorization","error","data"],"mappings":";;;AAAA,SAAoBA,YAApB,QAAwC,6BAAxC;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,OAAT,QAAwB,2BAAxB;AACA,SAASC,GAAT,QAAoB,0BAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;;AAMA,SAASC,IAAT,CAAcC,KAAd,EAA4B;AAC1B,QAAMC,MAAM,GAAG,YAAY;AACzBP,IAAAA,MAAM,CAACQ,MAAP,CAAcN,OAAO,CAACO,SAAtB;AACA,UAAMR,MAAM,CAACS,IAAP,CAAY,QAAZ,CAAN;AACD,GAHD;;AAIA,QAAM;AAACC,IAAAA,KAAD;AAAQC,IAAAA,IAAR;AAAcC,IAAAA,SAAd;AAAyBC,IAAAA;AAAzB,MAAiCR,KAAK,CAACS,IAAN,CAAWC,QAAlD;AAEA,SACI,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,qHAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIV,KAAK,CAACW,OAAV,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMX,KAAK,CAACS,IAAN,CAAWG,mBAAjB,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAoBZ,KAAK,CAACS,IAAN,CAAWI,eAAX,GAA6B,KAA7B,GAAqC,IAAzD,CAHF,EAIE;AAAQ,IAAA,OAAO,EAAEZ,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAII,KAAJ,CALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIC,IAAJ,CANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIC,SAAJ,CAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIC,IAAJ,CARF,CADJ;AAYD;;AAEDT,IAAI,CAACe,eAAL,GAAuB,OAAO;AAAEL,EAAAA;AAAF,CAAP,KAA+C;AACpE,QAAMM,GAAQ,GAAG,MAAMlB,GAAG,CAAC,iBAAD,EAAoB;AAC5CmB,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAER,IAAI,CAACG;AADb;AADmC,GAApB,CAA1B;AAMA,MAAID,OAAO,GAAG,gCAAd;;AAEA,MAAII,GAAG,CAACG,KAAR,EAAe;AACbP,IAAAA,OAAO,GAAGI,GAAG,CAACG,KAAd;AACD,GAFD,MAEO,IAAIH,GAAG,CAACI,IAAJ,IAAYJ,GAAG,CAACI,IAAJ,CAASR,OAAzB,EAAkC;AACvCA,IAAAA,OAAO,GAAGI,GAAG,CAACI,IAAJ,CAASR,OAAnB;AACD;;AAED,SAAO;AAAEA,IAAAA,OAAF;AAAWF,IAAAA;AAAX,GAAP;AACD,CAhBD;;AAkBA,eAAehB,YAAY,CAACM,IAAD,CAA3B","sourcesContent":["import { AuthProps, privateRoute } from \"../components/private_route\"\nimport Cookie from \"js-cookie\"\nimport Router from \"next/router\"\nimport { COOKIES } from \"../services/login_service\"\nimport { get } from \"../services/rest_service\"\nimport Layout from \"../components/layout\"\n\ntype Props = AuthProps & {\n  message: string\n}\n\nfunction Page(props: Props) {\n  const logout = async () => {\n    Cookie.remove(COOKIES.authToken);\n    await Router.push(\"/login\");\n  };\n  const {email, name, avatarUrl, role} = props.auth.userData\n\n  return (\n      <Layout title=\"Профиль пользователя\">\n        <p>{props.message}</p>\n        <div>{props.auth.authorizationString}</div>\n        <p>isAuthenticated:{props.auth.isAuthenticated ? \"YES\" : \"NO\"}</p>\n        <button onClick={logout}>Logout</button>\n        <p>{email}</p>\n        <p>{name}</p>\n        <p>{avatarUrl}</p>\n        <p>{role}</p>\n      </Layout>\n  )\n}\n\nPage.getInitialProps = async ({ auth }: AuthProps): Promise<Props> => {\n  const res: any = await get(\"/api/restricted\", {\n    headers: {\n      Authorization: auth.authorizationString\n    }\n  });\n\n  let message = \"Something unexpected happened!\";\n\n  if (res.error) {\n    message = res.error;\n  } else if (res.data && res.data.message) {\n    message = res.data.message\n  }\n\n  return { message, auth, };\n};\n\nexport default privateRoute(Page);\n"]},"metadata":{},"sourceType":"module"}