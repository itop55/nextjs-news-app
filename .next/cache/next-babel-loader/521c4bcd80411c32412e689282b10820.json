{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CHOROK\\\\projects\\\\news-app\\\\components\\\\private_route.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport ServerCookie from \"next-cookies\";\nimport React, { Component } from \"react\";\nimport { COOKIES } from \"../services/login_service\";\nimport { AuthToken } from \"../services/auth_token\";\nimport { redirectToLogin } from \"../services/redirect_service\";\nexport function privateRoute(WrappedComponent) {\n  return class extends Component {\n    static async getInitialProps(ctx) {\n      const token = ServerCookie(ctx)[COOKIES.authToken];\n      const auth = new AuthToken(token);\n      const initialProps = {\n        auth\n      };\n      if (auth.isExpired) redirectToLogin(ctx.res);\n      if (WrappedComponent.getInitialProps) return WrappedComponent.getInitialProps(initialProps);\n      return initialProps;\n    }\n\n    get auth() {\n      return new AuthToken(this.props.auth.token);\n    }\n\n    render() {\n      return __jsx(WrappedComponent, _extends({\n        auth: this.auth\n      }, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 14\n        }\n      }));\n    }\n\n  };\n}","map":{"version":3,"sources":["C:/Users/CHOROK/projects/news-app/components/private_route.tsx"],"names":["ServerCookie","React","Component","COOKIES","AuthToken","redirectToLogin","privateRoute","WrappedComponent","getInitialProps","ctx","token","authToken","auth","initialProps","isExpired","res","props","render"],"mappings":";;;;;AAAA,OAAOA,YAAP,MAAyB,cAAzB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,2BAAxB;AACA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,eAAT,QAAgC,8BAAhC;AAMA,OAAO,SAASC,YAAT,CAAsBC,gBAAtB,EAA6C;AAClD,SAAO,cAAcL,SAAd,CAAmC;AACxC,iBAAaM,eAAb,CAA6BC,GAA7B,EAAuC;AACrC,YAAMC,KAAK,GAAGV,YAAY,CAACS,GAAD,CAAZ,CAAkBN,OAAO,CAACQ,SAA1B,CAAd;AACA,YAAMC,IAAI,GAAG,IAAIR,SAAJ,CAAcM,KAAd,CAAb;AACA,YAAMG,YAAY,GAAG;AAAED,QAAAA;AAAF,OAArB;AACA,UAAIA,IAAI,CAACE,SAAT,EAAoBT,eAAe,CAACI,GAAG,CAACM,GAAL,CAAf;AACpB,UAAIR,gBAAgB,CAACC,eAArB,EAAsC,OAAOD,gBAAgB,CAACC,eAAjB,CAAiCK,YAAjC,CAAP;AACtC,aAAOA,YAAP;AACD;;AAED,QAAID,IAAJ,GAAW;AACT,aAAO,IAAIR,SAAJ,CAAc,KAAKY,KAAL,CAAWJ,IAAX,CAAgBF,KAA9B,CAAP;AACD;;AAEDO,IAAAA,MAAM,GAAG;AACP,aAAO,MAAC,gBAAD;AAAkB,QAAA,IAAI,EAAE,KAAKL;AAA7B,SAAuC,KAAKI,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACD;;AAhBuC,GAA1C;AAkBD","sourcesContent":["import ServerCookie from \"next-cookies\";\nimport React, { Component } from \"react\";\nimport { COOKIES } from \"../services/login_service\";\nimport { AuthToken } from \"../services/auth_token\";\nimport { redirectToLogin } from \"../services/redirect_service\";\n\nexport type AuthProps = {\n  auth: AuthToken\n}\n\nexport function privateRoute(WrappedComponent: any) {\n  return class extends Component<AuthProps> {\n    static async getInitialProps(ctx: any) {\n      const token = ServerCookie(ctx)[COOKIES.authToken];\n      const auth = new AuthToken(token);\n      const initialProps = { auth };\n      if (auth.isExpired) redirectToLogin(ctx.res);\n      if (WrappedComponent.getInitialProps) return WrappedComponent.getInitialProps(initialProps);\n      return initialProps;\n    }\n\n    get auth() {\n      return new AuthToken(this.props.auth.token);\n    }\n\n    render() {\n      return <WrappedComponent auth={this.auth} {...this.props} />;\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}